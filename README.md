# HealthDataProject

**- Σχετικά με το πρόγραμμα: -**

Το πρόγραμμα HealthDataProject φτιάχτηκε στα πλαίσια της πτυχιακής εργασίας, που έχει ως θέμα την άντληση δεδομένων υγείας σε μορφή Open mHealth JSON σχήματα, τον μετασχηματισμό τους σε RDF γράφους, την αποθήκευση τους στην σημασιολογική βάση δεδομένων GraphDB και την προβολή τους μέσω μιας web εφαρμογής. Το συγκεκριμένο πρόγραμμα σε γλώσσα java υλοποιεί τον αυτόματο μετασχηματισμό των δεδομένων από JSON σχήματα (Open mHealth) σε τριπλέτες RDF, την αποθήκευση τους στο GraphDB και την επαλήθευσή τους με τη χρήση της SHACL.

**Περιεχόμενα του HealthDataProject:**
1. Στους φακέλους "Body Height", "Body Weight", "Calories Burned", "Heart Rate" "Physical Activity", "Speed", "Step Count" που βρίσκονται στον φάκελο "HealthDataProject\schema" τα αρχεία "body_height_temp.ttl", "body_weight_temp.ttl", "calories_burned_temp.ttl", "heart_rate_temp.ttl", "physical_activity_temp.ttl", "speed_temp.ttl", "step_count_temp.ttl" αντίστοιχα. Πρόκειται για template αρχεία με κανόνες RML και χρησιμοποιούνται από το πρόγραμμα για τη μετατροπή των JSON σχημάτων σε .ttl αρχεία με κανόνες RML.
2. Στον φάκελο "HealthDataProject\FinalOntology" θα αποθηκευτεί η τελική οντολογία που θα δημιουργηθεί μετά την εκτέλεση του προγράμματος
3. Στον φάκελο "HealthDataProject\FinalTTL" βρίσκονται αποθηκευμένα τα αρχεία sosa.ttl, qudt.ttl και time.ttl. Πρόκειται για τις οντολογίες SOSA, QUDT και TIME των οποίοων χρησιμοποιούνται οι κλάσεις, οι ιδιότητες και τα αντικείμενα, για το σχηματισμό της τελικής οντολογίας.
4. Στον φάκελο "HealthDataProject\GraphDBconfig" βρίσκεται το αρχείο config.ttl το οποίο χρησιμοποιείται για τη δημιουργία repository στο GraphDB.
5. Στον φάκελο "HealthDataProject\jars" βρίσκονται τα αρχεία json-20230227.jar και rmlmapper.jar, τα οποία πρέπει να εισαχθούν στον compiler για την εκτέλεση του προγράμματος.
6. Στον φάκελο "HealthDataProject\SHACLValidation" βρίσκεται το αρχείο shacl.ttl το οποίο χρησιμοποιείται για την επικύρωση της εγκυρότητας της οντολογίας.
7. Στον φάκελο "HealthDataProject\src\com\healthdata βρίσκονται οι κλάσεις του προγράμμτος.

**Οι κλάσεις που περιλαμβάνει το πρόγραμμα είναι οι εξής:**
1.	**Την κλάση ReadBodyHeight**. Η κλάση αυτή διαβάζει τα JSON σχήματα που αφορούν το ύψος και τα μετατρέπει πρώτα σε μορφή RML και στη συνέχεια σε τριπλέτες RDF. Οι τριπλέτες που προέκυψαν αποθηκεύονται στον φάκελο FinalTTL σε μορφή .ttl με όνομα body_height_ΑριθμόςΜέτρησης_ΌνομαΑτόμου_output.ttl (π.χ. body_height_1_Nikos_output.ttl).
2.	**Την κλάση ReadBodyWeight**. Η κλάση αυτή διαβάζει τα JSON σχήματα που αφορούν το βάρος και τα μετατρέπει πρώτα σε μορφή RML και στη συνέχεια σε τριπλέτες RDF. Οι τριπλέτες που προέκυψαν αποθηκεύονται στον φάκελο FinalTTL σε μορφή .ttl με όνομα body_weight_ΑριθμόςΜέτρησης_ΌνομαΑτόμου_output.ttl (π.χ. body_weight _1_Nikos_output.ttl).
3.	**Την κλάση ReadCaloriesBurned**. Η κλάση αυτή διαβάζει τα JSON σχήματα που αφορούν τις θερμίδες που κάηκαν και τα μετατρέπει πρώτα σε μορφή RML και στη συνέχεια σε τριπλέτες RDF. Οι τριπλέτες που προέκυψαν αποθηκεύονται στον φάκελο FinalTTL σε μορφή .ttl με όνομα calories_burned_ΑριθμόςΜέτρησης_ΌνομαΑτόμου_output.ttl (π.χ. calories_burned_1_Nikos_output.ttl).
4.	**Την κλάση ReadHeartRate**. Η κλάση αυτή διαβάζει τα JSON σχήματα που αφορούν τους καρδιακούς παλμούς και τα μετατρέπει πρώτα σε μορφή RML και στη συνέχεια σε τριπλέτες RDF. Οι τριπλέτες που προέκυψαν αποθηκεύονται στον φάκελο FinalTTL σε μορφή .ttl με όνομα heart_rate_ΑριθμόςΜέτρησης_ΌνομαΑτόμου_output.ttl (π.χ. heart_rate_1_Nikos_output.ttl).
5.	**Την κλάση ReadPhysicalActivity**. Η κλάση αυτή διαβάζει τα JSON σχήματα που αφορούν τις δραστηριότητες και τα μετατρέπει πρώτα σε μορφή RML και στη συνέχεια σε τριπλέτες RDF. Οι τριπλέτες που προέκυψαν αποθηκεύονται στον φάκελο FinalTTL σε μορφή .ttl με όνομα physical_activity_ΑριθμόςΜέτρησης_ΌνομαΑτόμου_output.ttl (π.χ. physical_activity_1_Nikos_output.ttl).
6.	**Την κλάση ReadSpeed**. Η κλάση αυτή διαβάζει τα JSON σχήματα που αφορούν την ταχύτητα και τα μετατρέπει πρώτα σε μορφή RML και στη συνέχεια σε τριπλέτες RDF. Οι τριπλέτες που προέκυψαν αποθηκεύονται στον φάκελο FinalTTL σε μορφή .ttl με όνομα speed_ΑριθμόςΜέτρησης_ΌνομαΑτόμου_output.ttl (π.χ. speed_1_Nikos_output.ttl).
7.	**Την κλάση ReadStepCount**. Η κλάση αυτή διαβάζει τα JSON σχήματα που αφορούν τα βήματα που έγιναν και τα μετατρέπει πρώτα σε μορφή RML και στη συνέχεια σε τριπλέτες RDF. Οι τριπλέτες που προέκυψαν αποθηκεύονται στον φάκελο FinalTTL σε μορφή .ttl με όνομα step_count_ΑριθμόςΜέτρησης_ΌνομαΑτόμου_output.ttl (π.χ. step_count_1_Nikos_output.ttl).
8.	**Την κλάση RMLMapper**. Η κλάση αυτή μετατρέπει τα αρχεία που έχουν μορφή RML, σε τριπλέτες RDF.
9.	**Την κλάση GraphDBManager**. Η κλάση αυτή δημιουργεί ένα repository στο GraphDB χρησιμοποιώντας το αρχείο config.ttl που υπάρχει στον φάκελο GraphDBconfig, αφού πρώτα ελέγξει αν υπάρχει ήδη repository με το ίδιο όνομα. Έπειτα ανεβάζει όλα τα αρχεία που βρίσκονται στον φάκελο FinalTTL στο repository που δημιουργήθηκε.
10.	**Την κλάση ShaclValidation**. Η κλάση αυτή χρησιμοποιείται για την επαλήθευση των τριπλετών RDF που εισήχθησαν στο repository του GraphDB. Χρησιμοποιεί το αρχείο shacl.ttl που υπάρχει στον φάκελο SHACLValidation, εισάγοντάς το στο repository ποη δημιουργήθηκε.
11.	**Την κλάση TTLFilesMerger**. Η κλάση αυτή χρησιμοποιείται για την παραγωγή ενός ενιαίου .ttl αρχείου που περιλαμβάνει όλα τα .ttl αρχεία με τριπλέτες RDF που δημιουργήθηκαν. Δημιουργεί στην ουσία την τελική οντολογία, και την αποθηκεύει στον φάκελο FinalOntology με όνομα HealthOntology.ttl. Το HealthOntology.ttl χρησιμοποιείται για την προβολή της οντολογίας μέσω του προγράμματος Protégé.
12.	**Την κλάση Main**. Από αυτή τρέχουν όλες οι υπόλοιπες κλάσεις του προγράμματος με τη σειρά που περιγράφηκαν.

**Οδηγίες χρήσης:**
1. Τα δεδομένα υγείας που αφορούν το ύψος ενός ατόμου πρέπει να αποθηκευτούν στον φάκελο "HealthDataProject/schema/Body Height". Απαραίτητη προυπόθεση είναι τα αρχεία αυτά να είναι JSON σχήματα σε μορφή Open mHealth. Μέσα στον φάκελο υπάρχουν ήδη 3 JSON σχήματα που αφορούν το ύψος 3 διαφορετικών ατόμων. Εάν ο χρήστης επιθυμεί να τρέξει το πρόγραμμα χρησιμοποιώντας δικές του μετρήσεις, θα πρέπει να διαγράψει τα .JSON αρχεία που υπάρχουν μέσα στον φάκελο, και να ανεβάσει .JSON αρχεία που αφορούν τις δικές του μετρήσεις. Τα αρχεία που αποθηκεύονται θα πρέπει να έχουν όνομα της μορφής body_height_Αριθμός_ΌνομαΧρήστη.json (πχ body_height_1_Dimitris.json).
2. Τα δεδομένα υγείας που αφορούν το βάρος ενός ατόμου πρέπει να αποθηκευτούν στον φάκελο "HealthDataProject/schema/Body Weight". Απαραίτητη προυπόθεση είναι τα αρχεία αυτά να είναι JSON σχήματα σε μορφή Open mHealth. Μέσα στον φάκελο υπάρχουν ήδη 22 JSON σχήματα που αφορούν το βάρος 3 διαφορετικών ατόμων. Εάν ο χρήστης επιθυμεί να τρέξει το πρόγραμμα χρησιμοποιώντας δικές του μετρήσεις, θα πρέπει να διαγράψει τα .JSON αρχεία που υπάρχουν μέσα στον φάκελο, και να ανεβάσει .JSON αρχεία που αφορούν τις δικές του μετρήσεις. Τα αρχεία που αποθηκεύονται θα πρέπει να έχουν όνομα της μορφής body_weight_Αριθμός_ΌνομαΧρήστη.json (πχ body_weight_1_Dimitris.json).
3. Τα δεδομένα υγείας που αφορούν τις θερμίδες που έκαψε ένα ατόμο πρέπει να αποθηκευτούν στον φάκελο "HealthDataProject/schema/Calories Burned". Απαραίτητη προυπόθεση είναι τα αρχεία αυτά να είναι JSON σχήματα σε μορφή Open mHealth. Μέσα στον φάκελο υπάρχουν ήδη 22 JSON σχήματα που αφορούν τις θερμίδες που έκαψαν 3 διαφορετικα ατόμα. Εάν ο χρήστης επιθυμεί να τρέξει το πρόγραμμα χρησιμοποιώντας δικές του μετρήσεις, θα πρέπει να διαγράψει τα .JSON αρχεία που υπάρχουν μέσα στον φάκελο, και να ανεβάσει .JSON αρχεία που αφορούν τις δικές του μετρήσεις. Τα αρχεία που αποθηκεύονται θα πρέπει να έχουν όνομα της μορφής calories_burned_Αριθμός_ΌνομαΧρήστη.json (πχ calories_burned_1_Dimitris.json).
4. Τα δεδομένα υγείας που αφορούν τους καρδιακούς παλμούς ενός ατόμου πρέπει να αποθηκευτούν στον φάκελο "HealthDataProject/schema/Heart Rate". Απαραίτητη προυπόθεση είναι τα αρχεία αυτά να είναι JSON σχήματα σε μορφή Open mHealth. Μέσα στον φάκελο υπάρχουν ήδη 22 JSON σχήματα που αφορούν τους καρδιακούς παλμούς 3 διαφορετικών ατόμων. Εάν ο χρήστης επιθυμεί να τρέξει το πρόγραμμα χρησιμοποιώντας δικές του μετρήσεις, θα πρέπει να διαγράψει τα .JSON αρχεία που υπάρχουν μέσα στον φάκελο, και να ανεβάσει .JSON αρχεία που αφορούν τις δικές του μετρήσεις. Τα αρχεία που αποθηκεύονται θα πρέπει να έχουν όνομα της μορφής heart_rate_Αριθμός_ΌνομαΧρήστη.json (πχ heart_rate_1_Dimitris.json).
5. Τα δεδομένα υγείας που αφορούν τις δραστηριότητες που έκανε ένα ατόμο πρέπει να αποθηκευτούν στον φάκελο "HealthDataProject/schema/Physical Activity". Απαραίτητη προυπόθεση είναι τα αρχεία αυτά να είναι JSON σχήματα σε μορφή Open mHealth. Μέσα στον φάκελο υπάρχουν ήδη 22 JSON σχήματα που αφορούν τις δραστηριότητες που έκαναν 3 διαφορετικα ατόμα. Εάν ο χρήστης επιθυμεί να τρέξει το πρόγραμμα χρησιμοποιώντας δικές του μετρήσεις, θα πρέπει να διαγράψει τα .JSON αρχεία που υπάρχουν μέσα στον φάκελο, και να ανεβάσει .JSON αρχεία που αφορούν τις δικές του μετρήσεις. Τα αρχεία που αποθηκεύονται θα πρέπει να έχουν όνομα της μορφής physical_activity_Αριθμός_ΌνομαΧρήστη.json (πχ physical_activity_1_Dimitris.json).
6. Τα δεδομένα υγείας που αφορούν την ταχύτητα ενός ατόμου πρέπει να αποθηκευτούν στον φάκελο "HealthDataProject/schema/Speed". Απαραίτητη προυπόθεση είναι τα αρχεία αυτά να είναι JSON σχήματα σε μορφή Open mHealth. Μέσα στον φάκελο υπάρχουν ήδη 22 JSON σχήματα που αφορούν την ταχύτητα 3 διαφορετικών ατόμων. Εάν ο χρήστης επιθυμεί να τρέξει το πρόγραμμα χρησιμοποιώντας δικές του μετρήσεις, θα πρέπει να διαγράψει τα .JSON αρχεία που υπάρχουν μέσα στον φάκελο, και να ανεβάσει .JSON αρχεία που αφορούν τις δικές του μετρήσεις. Τα αρχεία που αποθηκεύονται θα πρέπει να έχουν όνομα της μορφής speed_Αριθμός_ΌνομαΧρήστη.json (πχ speed_1_Dimitris.json).
7. Τα δεδομένα υγείας που αφορούν τα βήματα που έκανε ένα ατόμο πρέπει να αποθηκευτούν στον φάκελο "HealthDataProject/schema/Step Count". Απαραίτητη προυπόθεση είναι τα αρχεία αυτά να είναι JSON σχήματα σε μορφή Open mHealth. Μέσα στον φάκελο υπάρχουν ήδη 22 JSON σχήματα που αφορούν τα βήματα που έκαναν 3 διαφορετικα ατόμα. Εάν ο χρήστης επιθυμεί να τρέξει το πρόγραμμα χρησιμοποιώντας δικές του μετρήσεις, θα πρέπει να διαγράψει τα .JSON αρχεία που υπάρχουν μέσα στον φάκελο, και να ανεβάσει .JSON αρχεία που αφορούν τις δικές του μετρήσεις. Τα αρχεία που αποθηκεύονται θα πρέπει να έχουν όνομα της μορφής step_count_Αριθμός_ΌνομαΧρήστη.json (πχ step_count_1_Dimitris.json).
8. Κατά την εκτέλεση του προγράμματος θα πρέπει παράλληλα να τρέχει το πρόγραμμα GraphDB Desktop, το οποίο είναι ο server που χειρίζεται όλες τις αλληλεπιδράσεις με τη βάση δεδομένων.
9. Για την εκτέλεση του προγράμματος χρειάζεται να γίνει εισαγωγή των json-20230227.jar και rmlmapper.jar που βρίσκονται αποθηκευμένα στον φάκελο "HealthDataProject\jars".
10. Το όνομα του GraphDB repository που θα δημιουργηθεί, ορίζεται μέσα από το αρχείο config.ttl που βρίσκεται στον φάκελο «HealthDataProject\GraphDBconfig», με την εντολή rep:repositoryID «Name». Το όνομα του repository, όπως έχει διαμορφωθεί στο config.ttl αρχείο είναι "HealthData". Εάν ο χρήστης επιθυμεί τη χρήση άλλου ονόματος θα πρέπει να αλλάξει το όνομα στην εντολή rep:repositoryID “HealthData” του config.ttl
11. Με την εκτέλεση του προγράμματος εκτός από τη δημιουργία του repository στο GraphDB και αποθήκευση των τριπλετών RDF σε αυτό, δημιουργείται και ένα .ttl αρχείο, το οποίο αποτελεί την τελική οντολογία, δηλαδή την ένωση όλων των τριπλετών RDF. Το αρχείο αυτό αποθηκεύεται στον φάκελο "HealthDataProject\FinalOntology".

**Το αποτέλεσμα της εκτέλεσης του προγράμμτος είναι το εξής:**
1. Στους φακέλους "Body Height", "Body Weight", "Calories Burned", "Heart Rate" "Physical Activity", "Speed", "Step Count" που βρίσκονται στον φάκελο "HealthDataProject\schema" για κάθε .JSON αρχείο που υπάρχει, δημιουργείται ένα .ttl αρχείο με κανόνες RML
2. Στον φάκελο "HealthDataProject\FinalTTL" αποθηκεύονται όλα τα .ttl αρχεία που περιέχουν τριπλέτες RDF που προέκυψαν από τον μετασχηματισμό των JSON αρχείων με κανόνες RML.
3. Στον φάκελο "HealthDataProject\FinalOntology" αποθηκεύεται η τελική οντολογία, με την ένωση όλων των .ttl αρχείων που υπάρχουν στον φάκελο "HealthDataProject\FinalTTL".
4. Δημιουργείται repository στο GraphDB στο οποίο ανεβαίνουν όλα τα αρχεία του φακέλου "HealthDataProject\FinalTTL".
5. Στο repository του GraphDB που δημιουργήθηκε, ανεβαίνει το αρχείο shacl.ttl του φακέλου "HealthDataProject\SHACLValidation" για να κάνει την επαλήθευση της εγκυρότητας των τριπλετών RDF.

